on: pull_request
name: End-to-End Tests
jobs:
  e2e:
    name: End-to-End Tests
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
      - uses: mskelton/setup-yarn@v3
        with:
          node-version: "20.x"
      - name: End-to-end Tests
        run: yarn test:e2e
      - name: Playwright report comment
        if: ${{ always() && github.event_name != 'merge_group' }}
        uses: daun/playwright-report-summary@v3.5.2
        with:
          report-file: "test-results/playwright-json-report.json"
          report-url: https://example.com
          comment-title: "Playwright test results"
          test-command: "yarn test:e2e"
          job-summary: true
